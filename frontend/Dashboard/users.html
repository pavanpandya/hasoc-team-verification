<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="UTF-8" />
    <title>Responsive Sidebar Menu | Code4education</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/user.css" />
    <!-- Boxicons CDN Link -->
    <link href="https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css" rel="stylesheet" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
        .pagination li:hover{
            cursor: pointer;
        }
		/* table tbody tr {
			display: none;
		} */
    </style>
    <!-- <script src="js/admin_users.js"></script> -->
</head>

<body>
    <!-- ------------------------------------------------------Side Bar Content--------------------------------------------------------------- -->
    <div class="sidebar active">
        <div class="logo_content">
            <div class="logo">
                <div class="logo_name">HASOC</div>
            </div>
            <i class="bx bx-menu" id="btn"></i>
        </div>
        <ul class="nav_list">
            <li>
                <i class="bx bx-search"></i>
                <input type="text" placeholder="Search..." />
                <span class="tooltip">Search</span>
            </li>
            <li>
                <a href="index.html">
                    <i class="bx bx-grid-alt"></i>
                    <span class="links_name">Dashboard</span>
                </a>
                <span class="tooltip">Dashboard</span>
            </li>
            <li>
                <a href="users.html">
                    <i class="bx bx-user"></i>
                    <span class="links_name">Users</span>
                </a>
                <span class="tooltip">Users</span>
            </li>
            <li>
                <a href="changepassword.html">
                    <i class="bx bx-cog"></i>
                    <span class="links_name">Change Password</span>
                </a>
                <span class="tooltip">Change Password</span>
            </li>
            <li>
                <a href="#">
                    <i class="bx bx-log-out"></i>
                    <span class="links_name">Logout</span>
                </a>
                <span class="tooltip">Logout</span>
            </li>
        </ul>
    </div>
    <!-- ------------------------------------------------------ Overall Stats --------------------------------------------------------------- -->
    <div class="home_content">
        <div class="text">Users</div>
        <div class="board">
            <table class="table table-hover" id="user">
                <thead>
                    <tr>
                        <td>No.</td>
                        <td>User Name</td>
                        <td>Email</td>
                        <td>File Verified Count</td>
                    </tr>
                </thead>
                <tbody id="user_table">
                    <tr>
                        <td>1</td>
                        <td>Pavan Pandya</td>
                        <td>pavan@gmail.com</td>
                        <td>20</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>Pavan Pandya</td>
                        <td>pavan@gmail.com</td>
                        <td>20</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>Pavan Pandya</td>
                        <td>pavan@gmail.com</td>
                        <td>20</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>Pavan Pandya</td>
                        <td>pavan@gmail.com</td>
                        <td>20</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>Pavan Pandya</td>
                        <td>pavan@gmail.com</td>
                        <td>20</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>Pavan Pandya</td>
                        <td>pavan@gmail.com</td>
                        <td>20</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>Pavan Pandya</td>
                        <td>pavan@gmail.com</td>
                        <td>20</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>Pavan Pandya</td>
                        <td>pavan@gmail.com</td>
                        <td>20</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>Pavan Pandya</td>
                        <td>pavan@gmail.com</td>
                        <td>20</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>Pavan Pandya</td>
                        <td>pavan@gmail.com</td>
                        <td>20</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>Pavan Pandya</td>
                        <td>pavan@gmail.com</td>
                        <td>20</td>
                    </tr>
                    <!-- <script>
                        display_users();
                    </script> -->
                </tbody>
            </table>
        </div>
        <!-- Start Pagination -->
		<div class='pagination-container' >
                <nav>
                    <ul class="pagination">
                        <li data-page="prev" >
                            <span> < <span class="sr-only">(current)</span></span>
                        </li>
                        	<!-- Here the JS Function Will Add the Rows -->
                        <li data-page="next" id="prev">
                            <span> > <span class="sr-only">(current)</span></span>
                        </li>
                    </ul>
                </nav>
		</div>
        <!-- 		End of Container -->
        <div class="d-flex justify-content-center">
            <button class="btn-lg p-3 mb-3" id="add_user_btn" onclick="add_user()">ADD MORE USERS</button>
        </div>
        <footer class="sticky-footer">
            <div class="container my-auto">
                <div class="copyright text-center my-auto">
                    <span>Copyright Â©<a href="https://hasocfire.github.io/hasoc/2022/index.html" target="_blank">HASOC 2022</a></span>
                </div>
            </div>
        </footer>
    </div>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        async function add_user() {
            Swal.fire({
                title: 'Create User',
                html: `<input type="name" id="name" class="swal2-input" placeholder="Username">
                <input type="email" id="Email" class="swal2-input" placeholder="Email">
                <input type="password" id="password" class="swal2-input" placeholder="Password"><br><br>
                <input type="checkbox" id="isadmin" class="mr-3" placeholder="admin access">Admin Access`,  
                confirmButtonText: 'Create',
                focusConfirm: false,
                preConfirm: () => {
                    const name = Swal.getPopup().querySelector('#name').value;
                    const email = Swal.getPopup().querySelector('#Email').value;
                    const password = Swal.getPopup().querySelector('#password').value;
                    const isadmin = Swal.getPopup().querySelector('#isadmin').checked;
                    //console.log(isadmin)
                    // return fetch(proxy + `/admin/user`, {
                    return fetch(`http://127.0.0.1:5500/frontend/Dashboard/user.html`, {
                        method: 'post',
                        body: JSON.stringify({ 'name': name, 'email': email, 'password': password, 'isadmin': isadmin }),
                        headers: {
                            'Content-type': 'application/json',
                            "x-access-token": localStorage.getItem("token")
                        }

                    }).then(response => {
                            //console.log(response)
                            if (response.status != 200) {
                                throw new Error(response.statusText)
                            }
                            return response.json()
                        })
                        .catch(error => {
                            Swal.showValidationMessage(
                                `Request failed: ${error}`
                            )
                        })
                },
                allowOutsideClick: () => !Swal.isLoading()
            }).then((result) => {
                if (result.isConfirmed) {
                    Swal.fire({
                        title: 'User Created Successfully!',
                        icon: 'success',
                        timer: 2000,
                        showConfirmButton: false
                    })
                    display_users();
                }
            })
        }
    </script>
    <script src="js/script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
</body>

</html>